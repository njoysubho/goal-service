/*
 * This file was generated by the Gradle 'init' task.
 */
plugins {
   // id("com.github.johnrengelman.shadow") version "6.1.0"
    id("io.micronaut.application") version "1.2.0"
    id 'org.jetbrains.kotlin.jvm' version '1.6.0'
    id "org.jetbrains.kotlin.kapt" version "1.6.0"
    id("org.jetbrains.kotlin.plugin.allopen") version "1.6.0"
    id("org.jetbrains.kotlin.plugin.noarg") version "1.6.0"
    id("org.jetbrains.kotlin.plugin.jpa") version "1.6.0"
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
    mavenCentral()
}

group = 'org.api'
version = '1.0.0-SNAPSHOT'
description = 'goal-org.api.service'

micronaut {
    runtime("netty")
    testRuntime("junit5")
    processing {
        incremental(true)
        annotations("org.api.*")
    }
    version = "$micronautVersion"
}
java {
    sourceCompatibility = JavaVersion.toVersion("17")
    targetCompatibility = JavaVersion.toVersion("17")
}

application {
    mainClass.set("org.api.Application")
}


tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}
dependencies {
    implementation("javax.inject:javax.inject:1")
    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.6.0'
    implementation("io.micronaut:micronaut-validation:$micronautVersion")
    implementation("io.micronaut:micronaut-runtime:$micronautVersion")
    implementation("io.micronaut:micronaut-http-client:$micronautVersion")
    implementation("io.micronaut:micronaut-http-server-netty:$micronautVersion")
    implementation("io.micronaut.configuration:micronaut-jdbc-tomcat:2.2.6")
    implementation('io.micronaut.flyway:micronaut-flyway:5.1.0')
    implementation('org.postgresql:postgresql:42.3.1')
    implementation("io.micronaut:micronaut-inject:$micronautVersion")
    implementation('com.fasterxml.jackson.module:jackson-module-kotlin:2.13.1')
    implementation("io.micronaut.data:micronaut-data-hibernate-jpa:3.2.2")
    implementation("io.micronaut.graphql:micronaut-graphql:$micronautGraphqlVersion")
    implementation('io.swagger.core.v3:swagger-annotations:2.1.12')

    implementation('com.graphql-java-kickstart:graphql-java-tools:12.0.2')

    kapt('io.micronaut.data:micronaut-data-processor:3.2.1')
    kapt("io.micronaut:micronaut-inject-java:$micronautVersion")
    kapt('io.micronaut.openapi:micronaut-openapi:3.2.0')

    runtimeOnly('ch.qos.logback:logback-classic:1.2.10')

    kaptTest("io.micronaut:micronaut-inject-java:$micronautVersion")
    testImplementation('io.rest-assured:rest-assured:4.4.0')
    testImplementation('org.assertj:assertj-core:3.22.0')
    testImplementation('io.mockk:mockk:1.12.2')
    testImplementation('org.testcontainers:postgresql:1.16.2')

}
compileKotlin {
    kotlinOptions {
        jvmTarget = "17"
    }
}
compileTestKotlin {
    kotlinOptions {
        jvmTarget = "17"
    }
}
